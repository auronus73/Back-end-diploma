<ul class="pagination">
    @if ((Model.TotalPages) > 6 && (Model.PageNumber < 5))
    {
        for (int n = 1; n < 6; n++)
        {
            if (Model.PageNumber == n)
            {
                <li class="active"><span>@Model.PageNumber</span></li>
            }
            else
            {
                <li><a href="?pageNumber=@n">@n</a></li>
            }
        }
        <li><span>...</span></li>
        <li><a href="?pageNumber=@Model.TotalPages">@Model.TotalPages</a></li>
    }
    else
    {
        if (Model.TotalPages < 6)
        {
            for (int n = 1; n < Model.TotalPages + 1; n++)
            {
                if (Model.PageNumber == n)
                {
                    <li class="active"><span>@Model.PageNumber</span></li>
                }
                else
                {
                <li><a href="?pageNumber=@n">@n</a></li>
                }
            }
        }
        else
        {
            if ((Model.TotalPages) > 6 && (Model.PageNumber < Model.TotalPages - 3) && (Model.PageNumber >= 5))
            {
                <li><a href="?pageNumber=1">1</a></li>
                <li><span>...</span></li>
                for (int n = Model.PageNumber - 2; n < Model.PageNumber + 3; n++)
                {
                    if (Model.PageNumber == n)
                    {
                        <li class="active"><span>@Model.PageNumber</span></li>
                    }
                    else
                    {
                        <li><a href="?pageNumber=@n">@n</a></li>
                    }
                }
                <li><span>...</span></li>
                <li><a href="?pageNumber=@Model.TotalPages">@Model.TotalPages</a></li>
            }
            else
            {
                <li><a href="?pageNumber=1">1</a></li>
                <li><span>...</span></li>
                for (int n = Model.TotalPages - 4; n < Model.TotalPages + 1; n++)
                {
                    if (Model.PageNumber == n)
                    {
                        <li class="active"><span>@Model.PageNumber</span></li>
                    }
                    else
                    {
                        <li><a href="?pageNumber=@n">@n</a></li>
                    }
                }
            }
        }
    }
    </ul>
